[cont partial patches
ekmett@gmail.com**20090412103730] {
hunk ./src/Control/Monad/CPS/Cont.hs 13
+import Unsafe.Coerce
hunk ./src/Control/Monad/CPS/Cont.hs 48
+newtype Const r a = Const { unConst :: r } 
+
+instance Functor (Const r) where
+	fmap _ = Const . unConst
+
+newtype Cont' r a = Cont' { unCont' :: Codensity (Const r) a } 
+
+callCC' :: ((a -> Codensity (Const r) b) -> Codensity (Const r) a) -> Codensity (Const r) a
+callCC' f = Codensity $ \k -> runCodensity (f (\a -> Codensity $ \_ -> k a))
+
+instance MonadCont (Cont' r) where
+    callCC f = Cont' (Codensity $ \k -> runContT (f (\a -> ContT $ \_ -> k a)) (Const k)
+
+runCont' :: Cont' r a -> (a -> r) -> r
+
+
}
