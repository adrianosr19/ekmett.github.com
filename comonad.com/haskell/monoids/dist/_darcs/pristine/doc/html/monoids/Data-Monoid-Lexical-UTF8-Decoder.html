<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--Rendered using the Haskell Html Library v0.2-->
<HTML
>
<!-- Mirrored from comonad.com/haskell/monoids/dist/_darcs/pristine/doc/html/monoids/Data-Monoid-Lexical-UTF8-Decoder.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 20 Aug 2013 23:18:03 GMT -->
<HEAD
><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"
><TITLE
>Data.Monoid.Lexical.UTF8.Decoder</TITLE
><LINK HREF="haddock.css" REL="stylesheet" TYPE="text/css"
><SCRIPT SRC="haddock-util.js" TYPE="text/javascript"
></SCRIPT
></HEAD
><BODY
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD CLASS="topbar"
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD
><IMG SRC="haskell_icon.gif" WIDTH="16" HEIGHT="16" ALT=" "
></TD
><TD CLASS="title"
>monoids-0.1.36: Monoids, specialized containers and a general map/reduce framework</TD
><TD CLASS="topbut"
><A HREF="src/Data-Monoid-Lexical-UTF8-Decoder.html"
>Source code</A
></TD
><TD CLASS="topbut"
><A HREF="index-2.html"
>Contents</A
></TD
><TD CLASS="topbut"
><A HREF="doc-index.html"
>Index</A
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="modulebar"
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD
><FONT SIZE="6"
>Data.Monoid.Lexical.UTF8.Decoder</FONT
></TD
><TD ALIGN="right"
><TABLE CLASS="narrow" CELLSPACING="0" CELLPADDING="0"
><TR
><TD CLASS="infohead"
>Portability</TD
><TD CLASS="infoval"
>non-portable (MPTCs)</TD
></TR
><TR
><TD CLASS="infohead"
>Stability</TD
><TD CLASS="infoval"
>experimental</TD
></TR
><TR
><TD CLASS="infohead"
>Maintainer</TD
><TD CLASS="infoval"
>ekmett@gmail.com</TD
></TR
></TABLE
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="section1"
>Description</TD
></TR
><TR
><TD CLASS="doc"
><P
>UTF8 encoded unicode characters can be parsed both forwards and backwards,
 since the start of each <TT
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/ghc-prim/GHC-Types.html#t%3AChar"
>Char</A
></TT
> is clearly marked. This <TT
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Monoid.html#t%3AMonoid"
>Monoid</A
></TT
> accumulates
 information about the characters represented and reduces that information
 using a <TT
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
></TT
>, which is just a <TT
><A HREF="Data-Monoid-Reducer.html#t%3AReducer"
>Reducer</A
></TT
> <TT
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Monoid.html#t%3AMonoid"
>Monoid</A
></TT
> that knows what 
 it wants to do about an <TT
><A HREF="Data-Monoid-Reducer-Char.html#v%3AinvalidChar"
>invalidChar</A
></TT
> -- a  string of <TT
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Word.html#t%3AWord8"
>Word8</A
></TT
> values that 
 don't form a valid UTF8 character.
</P
><P
>As this monoid parses chars it just feeds them upstream to the underlying
 CharReducer. Efficient left-to-right and right-to-left traversals are 
 supplied so that a lazy ByteString can be parsed efficiently by 
 chunking it into strict chunks, and batching the traversals over each
 before stitching the edges together.
</P
><P
>Because this needs to be a <TT
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Monoid.html#t%3AMonoid"
>Monoid</A
></TT
> and should return the exact same result
 regardless of forward or backwards parsing, it chooses to parse only 
 canonical UTF8 unlike most Haskell UTF8 parsers, which will blissfully 
 accept illegal alternative long encodings of a character. 
</P
><P
>This actually fixes a potential class of security issues in some scenarios:
</P
><P
><A HREF="http://prowebdevelopmentblog.com/content/big-overhaul-java-utf-8-charset"
>http://prowebdevelopmentblog.com/content/big-overhaul-java-utf-8-charset</A
>
</P
><P
>NB: Due to naive use of a list to track the tail of an unfinished character 
 this may exhibit <TT
>O(n^2)</TT
> behavior parsing backwards along an invalid sequence 
 of a large number of bytes that all claim to be in the tail of a character.
</P
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="section1"
>Documentation</TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="decl"
>module <A HREF="Data-Monoid-Reducer-Char.html"
>Data.Monoid.Reducer.Char</A
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="topdecl"
><TABLE CLASS="declbar"
><TR
><TD CLASS="declname"
><SPAN CLASS="keyword"
>data</SPAN
>  <A NAME="t%3AUTF8"
></A
><B
>UTF8</B
> m </TD
><TD CLASS="declbut"
><A HREF="src/Data-Monoid-Lexical-UTF8-Decoder.html#UTF8"
>Source</A
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="body"
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD CLASS="section4"
><IMG SRC="minus.gif" CLASS="coll" ONCLICK="toggle(this,'i:UTF8')" ALT="show/hide"
> Instances</TD
></TR
><TR
><TD CLASS="body"
><DIV ID="i:UTF8" STYLE="display:block;"
><TABLE CLASS="vanilla" CELLSPACING="1" CELLPADDING="0"
><TR
><TD CLASS="decl"
><A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Control-Monad.html#t%3AFunctor"
>Functor</A
> <A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
></TD
></TR
><TR
><TD CLASS="decl"
>Pointed <A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
></TD
></TR
><TR
><TD CLASS="decl"
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="Data-Monoid-Reducer.html#t%3AReducer"
>Reducer</A
> <A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Word.html#t%3AWord8"
>Word8</A
> (<A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m)</TD
></TR
><TR
><TD CLASS="decl"
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="Data-Ring-Module.html#t%3ARightModule"
>RightModule</A
> <A HREF="Data-Ring-Semi-Natural.html#t%3ANatural"
>Natural</A
> (<A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m)</TD
></TR
><TR
><TD CLASS="decl"
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="Data-Ring-Module.html#t%3ALeftModule"
>LeftModule</A
> <A HREF="Data-Ring-Semi-Natural.html#t%3ANatural"
>Natural</A
> (<A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m)</TD
></TR
><TR
><TD CLASS="decl"
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="Data-Ring-Module.html#t%3AModule"
>Module</A
> <A HREF="Data-Ring-Semi-Natural.html#t%3ANatural"
>Natural</A
> (<A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m)</TD
></TR
><TR
><TD CLASS="decl"
><A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="../../../../../../../../usr/local/share/doc/ghc/libraries/base/Data-Monoid.html#t%3AMonoid"
>Monoid</A
> (<A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m)</TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="topdecl"
><TABLE CLASS="declbar"
><TR
><TD CLASS="declname"
><A NAME="v%3ArunUTF8"
></A
><B
>runUTF8</B
> :: <A HREF="Data-Monoid-Reducer-Char.html#t%3ACharReducer"
>CharReducer</A
> m =&gt; <A HREF="Data-Monoid-Lexical-UTF8-Decoder.html#t%3AUTF8"
>UTF8</A
> m -&gt; m</TD
><TD CLASS="declbut"
><A HREF="src/Data-Monoid-Lexical-UTF8-Decoder.html#runUTF8"
>Source</A
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="botbar"
>Produced by <A HREF="http://www.haskell.org/haddock/"
>Haddock</A
> version 2.3.0</TD
></TR
></TABLE
></BODY
>
<!-- Mirrored from comonad.com/haskell/monoids/dist/_darcs/pristine/doc/html/monoids/Data-Monoid-Lexical-UTF8-Decoder.html by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 20 Aug 2013 23:18:04 GMT -->
</HTML
>
